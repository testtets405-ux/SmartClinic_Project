"""
================================================================================
ملف الإعدادات المركزية (config.py)
================================================================================
الهدف المنهجي (للطالب):
هذا الملف هو بمثابة "لوحة الثوابت والأمان" (Configuration Center) لتطبيق Flask بالكامل. 
في البرمجة الاحترافية (Best Practices)، لا يجوز كتابة المسارات أو مفاتيح التشفير بشكل 
مباشر داخل الكود (Hardcoding) حيث يمكن أن تتناثر ويصعب تعديلها. بدلاً من ذلك، نضعها 
في (Class) واحد يُدعى Config، ليقوم التطبيق (app.py) بقراءتها دفعة واحدة عند بدء التشغيل.
================================================================================
"""

import os

# [الشرح]: استخراج المسار الجذري الفعلي (الـ Directory) الذي يحتوي على هذا الملف.
# يفيد هذا لضمان أن النظام سيعرف مكانه أينما رفعته (مثل PythonAnywhere).
BASE_DIR = os.path.abspath(os.path.dirname(__file__))


class Config:
    """
    [الفئة Config]:
    تحتوي على متغيرات يتم حقنها (Inject) في إعدادات الفلاسك (app.config).
    """

    # ── 1. مفتاح الجلسة (Secret Key) ──
    # [وظيفتها]: عبارة عن سلسلة نصية تُستخدم لخوارزميات التشفير.
    # [أهميتها]: بدونها، لا يمكن للفلاسك تشفير ملفات الارتباط (Cookies) الخاصة بتسجيل 
    # الدخول (Sessions)، مما يُمكّن المخترقين من تزوير هويتهم كمدراء!
    SECRET_KEY = os.environ.get("SECRET_KEY", "smart-clinic-secret-key-2026")

    # ── 2. الرمز السري للإدارة (Admin Secret Key) ──
    # [وظيفتها]: طبقة حماية ثانية (2nd Layer). حتى لو كان طبيب يمتلك حساباً في 
    # النظام، لن يستطيع إنشاء حِساب "مدير" بصلاحيات عليا إلا إذا كان يعلم هذا الرمز السري.
    ADMIN_SECRET_KEY = os.environ.get("ADMIN_SECRET_KEY", "123456")

    # ── 3. مسار قاعدة البيانات (Database URI) ──
    # [وظيفتها]: تخبر مكتبة SQLAlchemy عن نوع قاعدة البيانات ومكانها. 
    # "sqlite:///" تعني أننا نستخدم محرك SQLite المحلي والموجود في المسار المدمج (clinic.db).
    SQLALCHEMY_DATABASE_URI = "sqlite:///" + os.path.join(BASE_DIR, "clinic.db")

    # ── 4. التتبع التلقائي للتغييرات (Track Modifications) ──
    # [وظيفتها]: الفلاسك يقوم افتراضياً بمراقبة الجدول لإشعار النظام بأي تعديل.
    # يتم إيقافها هنا (False) لتوفير سعة الذاكرة العشوائية (RAM) للحصول على أداء أسرع.
    SQLALCHEMY_TRACK_MODIFICATIONS = False

    # ── 5. وضع المطور (Debug Mode) ──
    # [وظيفتها]: تفعيل الأخطاء المفصلة؛ في حال انهيار التطبيق، سيُكتب سبب الخطأ بوضوح.
    DEBUG = True
